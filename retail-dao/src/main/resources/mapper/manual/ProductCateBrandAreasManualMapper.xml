<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.jzfq.retail.core.dao.manual.ProductCateBrandAreasManualMapper">

    <resultMap id="BaseResultMap" type="com.jzfq.retail.bean.domain.ProductCateBrandAreas" >
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Mon Jul 16 18:22:21 CST 2018.
        -->
        <id column="productCateBrandAreas_id" property="id" jdbcType="INTEGER" />
        <result column="productCateBrandAreas_cate_id" property="cateId" jdbcType="INTEGER" />
        <result column="productCateBrandAreas_brand_id" property="brandId" jdbcType="INTEGER" />
        <result column="productCateBrandAreas_area_id" property="areaId" jdbcType="VARCHAR" />
        <result column="productCateBrandAreas_interval_price_min" property="intervalPriceMin" jdbcType="DECIMAL" />
        <result column="productCateBrandAreas_interval_price_max" property="intervalPriceMax" jdbcType="DECIMAL" />
        <result column="productCateBrandAreas_status" property="status" jdbcType="INTEGER" />
        <result column="productCateBrandAreas_approval_user" property="approvalUser" jdbcType="VARCHAR" />
        <result column="productCateBrandAreas_approval_user_id" property="approvalUserId" jdbcType="INTEGER" />
        <result column="productCateBrandAreas_approval_time" property="approvalTime" jdbcType="TIMESTAMP" />
        <result column="productCateBrandAreas_create_id" property="createId" jdbcType="INTEGER" />
        <result column="productCateBrandAreas_creater" property="creater" jdbcType="VARCHAR" />
    </resultMap>

    <sql id="Base_Column_List" >
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Mon Jul 16 18:22:21 CST 2018.
        -->
        productCateBrandAreas.id as productCateBrandAreas_id, productCateBrandAreas.cate_id as productCateBrandAreas_cate_id,
        productCateBrandAreas.brand_id as productCateBrandAreas_brand_id, productCateBrandAreas.area_id as productCateBrandAreas_area_id,
        productCateBrandAreas.interval_price_min as productCateBrandAreas_interval_price_min,
        productCateBrandAreas.interval_price_max as productCateBrandAreas_interval_price_max,
        productCateBrandAreas.status as productCateBrandAreas_status, productCateBrandAreas.approval_user as productCateBrandAreas_approval_user,
        productCateBrandAreas.approval_user_id as productCateBrandAreas_approval_user_id,
        productCateBrandAreas.approval_time as productCateBrandAreas_approval_time, productCateBrandAreas.create_id as productCateBrandAreas_create_id,
        productCateBrandAreas.creater as productCateBrandAreas_creater
    </sql>

    <select id="findList" resultType="map" parameterType="com.jzfq.retail.bean.vo.req.ProductCateBrandAreasSearchReq">
        select
        productCateBrandAreas.id as id,
        productCateBrandAreas.cate_id as cateId,
        productCateBrandAreas.brand_id as brandId,
        productCateBrandAreas.area_id as areaId,
        productCateBrandAreas.interval_price_min as intervalPriceMin,
        productCateBrandAreas.interval_price_max as intervalPriceMax,
        productCateBrandAreas.status as status,
        productCateBrandAreas.approval_user as approvalUser,
        productCateBrandAreas.approval_user_id as approvalUserId,
        DATE_FORMAT(productCateBrandAreas.approval_time,'%Y-%m-%d %H:%i:%s') as approvalTime,
        productCateBrandAreas.create_id as createId,
        productCateBrandAreas.creater as creater,
        DATE_FORMAT(productCateBrandAreas.create_time,'%Y-%m-%d %H:%i:%s') as createTime,
        pb.name as brandName,
        pc.name as cateName,
        areas.name as areaName,
        areas.parent_id as province
        FROM product_cate_brand_areas as productCateBrandAreas
        left join product_brand as pb on productCateBrandAreas.brand_id = pb.id
        left join product_cate as pc on productCateBrandAreas.cate_id = pc.id
        left join areas as areas on productCateBrandAreas.area_id = areas.area_id
        <where>
            1=1
            <if test="status!=null">
                and productCateBrandAreas.status=#{status}
            </if>
            <if test="cateName!=null">
                and pc.name like concat('%',#{cateName},'%')
            </if>
            <if test="brandName!=null">
                and pb.name like concat('%',#{brandName},'%')
            </if>
            <if test="areaName!=null">
                and areas.name like concat('%',#{areaName},'%')
            </if>
            <if test="approvalUser!=null">
                and productCateBrandAreas.approval_user like concat('%',#{approvalUser},'%')
            </if>
            <if test="createUser!=null">
                and productCateBrandAreas.creater like concat('%',#{createUser},'%')
            </if>
        </where>
        ORDER BY productCateBrandAreas.id desc
    </select>
</mapper>